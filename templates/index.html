<!DOCTYPE html>
<html>
<head>
    <title>Image Sorter</title>
    <style>
        body { font-family: Arial; text-align: center; background: #f0f0f0; }
        #image { max-width: 80%; max-height: 70vh; border: 2px solid #ddd; margin: 20px; }
        .buttons { margin: 30px; }
        button {
            font-size: 3em; width: 120px; height: 120px;
            border: none; border-radius: 50%; margin: 10px; cursor: pointer;
        }
        .like { background: #4CAF50; }     /* âœ… */
        .dislike { background: #f44336; } /* âŒ */
        .only_sex { background: #FF9800; } /* ğŸ”¥ */
        .delete { background: #9E9E9E; }   /* ğŸ—‘ï¸ */
        #status { font-size: 1.2em; color: #666; margin: 20px; }
        #progress { font-size: 1.5em; }
    </style>
</head>
<body>
    <h1>ğŸ“¸ Ğ¡Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞ¹ Ñ„Ğ¾Ñ‚Ğ¾</h1>
    {% if img_url %}
        <img id="image" src="{{ img_url }}" alt="Photo">
        <div class="buttons">
            <button class="like" onclick="sort('like')" title="âœ… Like">ğŸ‘</button>
            <button class="dislike" onclick="sort('dislike')" title="âŒ Dislike">ğŸ‘</button>
            <button class="only_sex" onclick="sort('only_sex')" title="ğŸ”¥ Only Sex">ğŸ”¥</button>
            <button class="delete" onclick="sort('delete')" title="ğŸ—‘ï¸ Delete">ğŸ—‘ï¸</button>
        </div>
    {% else %}
        <h2>âœ… Ğ’ÑĞµ Ñ„Ğ¾Ñ‚Ğ¾ Ğ¾Ñ‚ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾!</h2>
        <p>ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ Ğ¿Ğ°Ğ¿ĞºĞ¸: like/, dislike/, only_sex/, delete/</p>
    {% endif %}

    <div id="status"></div>
    <div id="progress"></div>

    <script>
        let current_filename = '';

        function sort(category) {
            fetch('/sort', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({filename: current_filename, category: category})
            })
            .then(r => r.json())
            .then(data => {
                document.getElementById('status').innerText = data.message;
                setTimeout(loadNext, 500);
            });
        }

        function loadNext() {
            window.location.reload();
        }

        {% if img_url %}
            current_filename = new URL(document.getElementById('image').src).pathname.split('/').pop();
        {% endif %}
    </script>
</body>
</html>
